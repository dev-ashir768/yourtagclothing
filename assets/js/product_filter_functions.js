function flatten(r,e){for(let t=0,a=r.length;t<a;t++){const a=r[t];Array.isArray(a)?flatten(a,e):e.push(a)}return e}function updateQueryString(r,e,t){var a,n=new RegExp("([?&])"+r+"=.*?(&|#|$)(.*)","gi");if(n.test(t))return null!=e?t.replace(n,"$1"+r+"="+e+"$2$3"):(a=t.split("#"),t=a[0].replace(n,"$1$3").replace(/(&|\?)$/,""),void 0!==a[1]&&null!==a[1]&&(t+="#"+a[1]),t);if(null!=e){var l=-1!==t.indexOf("?")?"&":"?";return a=t.split("#"),t=a[0]+l+r+"="+e,void 0!==a[1]&&null!==a[1]&&(t+="#"+a[1]),t}return t}function isOfType(r,e){const t=new RegExp("(.+\\-"+e+"\\d+)","g");return result=r.match(t),"grammage"!=e&&"weight"!=e?result:r.startsWith(e)?e:null}function getUrlParts(){for(var r=window.location.href.replace(/^.*\/\/[^\/]+/,"").split("?"),e=r[0],t={category:[],brand:[],style:[],gender:[],color:[],size:[],option:[],grammage:[],weight:[],attribute_value:[],warehouse:[],select:[],params:r.length>1?"?"+r[1]:"",grouping:[]},a=e.split("/"),n=0;n<a.length;n++){var l=a[n];isOfType(l,"c")?t.category.push(l):isOfType(l,"b")?t.brand.push(l):isOfType(l,"s")?t.style.push(l):isOfType(l,"g")?t.gender.push(l):isOfType(l,"m")?t.color.push(l):isOfType(l,"x")?t.size.push(l):isOfType(l,"o")?t.option.push(l):isOfType(l,"grammage")?t.grammage.push(l):isOfType(l,"weight")?t.weight.push(l):isOfType(l,"ww")?t.warehouse.push(l):isOfType(l,"r")?t.grouping.push(l):isOfType(l,"a")?t.attribute_value.push(l):"select"==l&&(t.select.push("select"),t.select.push(a[n+1]))}return t}function buildUrlFromParts(r){var e;return""!=(e=flatten(e=[r.select,r.category,r.brand,r.style,r.gender,r.color,r.size,r.option,r.grammage,r.weight,r.warehouse,r.attribute_value,r.grouping],[]).join("/").trim())&&"/"!=e||(e=jQuery("#product-filters").attr("data-base-url")),updateQueryString("page",null,e+=r.params)}function openUrl(r){r=r.startsWith("/")?r:"/"+r,jQuery.pjax({url:r,container:"#pjax-container",timeout:1e4,scrollTo:!1})}function openCategoryStyle(r,e){var t=getUrlParts();t.category=[r],t.style=[e],openUrl(buildUrlFromParts(t))}function openCategory(r){var e=getUrlParts();e.category=[r],openUrl(buildUrlFromParts(e))}function openBrand(r){var e=getUrlParts();e.brand.push(r),openUrl(buildUrlFromParts(e))}function openStyle(r){var e=getUrlParts();e.style=[r],openUrl(buildUrlFromParts(e))}function openGender(r){var e=getUrlParts();e.gender=[r],openUrl(buildUrlFromParts(e))}function openColor(r){var e=getUrlParts();e.color.push(r),openUrl(buildUrlFromParts(e))}function openSize(r){var e=getUrlParts();e.size.push(r),openUrl(buildUrlFromParts(e))}function openAttributeValue(r){var e=getUrlParts();e.attribute_value.push(r),openUrl(buildUrlFromParts(e))}function openOption(r){var e=getUrlParts();e.option.push(r),openUrl(buildUrlFromParts(e))}function openGrammage(r){var e=getUrlParts();e.grammage.push(r),openUrl(buildUrlFromParts(e))}function openWeight(r){var e=getUrlParts();e.weight.push(r),openUrl(buildUrlFromParts(e))}function openComposition(r){var e=window.location.href.replace(/^.*\/\/[^\/]+/,"");e=updateQueryString("composition",r,e),openUrl(updateQueryString("page",null,e))}function openAdult(){var r=window.location.href.replace(/^.*\/\/[^\/]+/,"");r=updateQueryString("adult",!0,r),openUrl(updateQueryString("page",null,r))}function openWarehouse(r){var e=getUrlParts();e.warehouse.push(r),openUrl(buildUrlFromParts(e))}function leaveCategory(){var r=getUrlParts();r.select?r.category=[]:r.category=jQuery("#product-filters").attr("data-base-url"),r.style=[],openUrl(buildUrlFromParts(r))}function leaveGrouping(r){var e=getUrlParts();e.grouping.splice(e.grouping.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveBrand(r){var e=getUrlParts();e.brand.splice(e.brand.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveStyle(r,e){var t=getUrlParts();t.style=[],e&&(t.style=e),openUrl(buildUrlFromParts(t))}function leaveGender(r){var e=getUrlParts();e.gender.splice(e.gender.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveColor(r){var e=getUrlParts();e.color.splice(e.color.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveSize(r){var e=getUrlParts();e.size.splice(e.size.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveAttributeValue(r){var e=getUrlParts();e.attribute_value.splice(e.attribute_value.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveOption(r){var e=getUrlParts();e.option.splice(e.option.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveGrammage(r){var e=getUrlParts();e.grammage.splice(e.grammage.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveWeight(r){var e=getUrlParts();e.weight.splice(e.weight.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveComposition(){var r=window.location.href.replace(/^.*\/\/[^\/]+/,"");r=updateQueryString("composition",null,r),openUrl(updateQueryString("page",null,r))}function leavePrice(){var r=window.location.href.replace(/^.*\/\/[^\/]+/,"");r=updateQueryString("price_min",null,r),r=updateQueryString("price_max",null,r),openUrl(updateQueryString("page",null,r))}function leaveAdult(){var r=window.location.href.replace(/^.*\/\/[^\/]+/,"");r=updateQueryString("adult",null,r),openUrl(updateQueryString("page",null,r))}function leaveWarehouse(r){var e=getUrlParts();e.warehouse.splice(e.warehouse.indexOf(r),1),openUrl(buildUrlFromParts(e))}function leaveAll(){openUrl(buildUrlFromParts({category:[],brand:[],style:[],gender:[],color:[],size:[],option:[],grammage:[],weight:[],warehouse:[],grouping:[],params:[]}))}function initRangeSlider(r){console.log("Initializing slider");var e=jQuery(r).attr("data-price-min"),t=jQuery(r).attr("data-price-max"),a=jQuery(r).attr("data-min"),n=jQuery(r).attr("data-max"),l=.01;""==e&&(e=a),""==t&&(t=n);var o=jQuery(r).attr("data-currency");jQuery(r).ionRangeSlider({skin:"square",type:"double",grid:!0,min:a,max:n,step:l,to:t,from:e,prefix:o,onFinish:function(r){var e=window.location.href.replace(/^.*\/\/[^\/]+/,"");e=updateQueryString("price_min",r.from,e),openUrl(e=updateQueryString("price_max",r.to,e))}})}String.prototype.startsWith||(String.prototype.startsWith=function(r,e){return e=e||0,this.indexOf(r,e)===e});